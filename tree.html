<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        
        <!-- <style>
            #start, #middle, #end {
                height: 100vh;
            }

            #start {
                background-color: bisque;
            }

            #force-placeholder {
                position: sticky;
                top:0;
            }
        </style> -->
    </head>
    <body>  
        <div id="h-scroll">
          <select name="state" id="koko-nokoko">
            <option value="koko">Koko</option>
            <option value="nokoko">Without Koko</option>
          </select>
            <div id="tree-placeholder"></div>
            <!-- <div id="start" class="step"></div>
            <div id="middle" class="step"></div>
            <div id="end" class="step"></div> -->
        </div>
    </body>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <!-- <script src="scroller.js"></script> -->
    <script src="tree.js"></script>
    <script>
        async function init(){
            
            let flow = await d3.json('tree.json', d3.autoType)

            var intervention_select = document.getElementById("koko-nokoko");
            var intervention = intervention_select.value;
            intervention_select.addEventListener("change", function() {
    				intervention = intervention_select.value
                    // tree_vis.update(intervention)
                    console.log(event.target.value)
            });

            //  FileAttachment("flare.json").json()
            let tree_vis = Tree(flow,{
                label: d => d.name,
                title: (d, n) => `${n.ancestors().reverse().map(d => d.data.name).join(".")}`, // hover text
                link: (d, n) => `https://github.com/prefuse/Flare/${n.children ? "tree" : "blob"}/master/flare/src/${n.ancestors().reverse().map(d => d.data.name).join("/")}${n.children ? "" : ".as"}`,
                width: 1152,
                intervention_type: intervention
            })

                            // let launch_vis = launch()
        }
        init()

    </script>

</html>